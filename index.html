<!DOCTYPE html>
<html lang="en">
<head>
   <meta charset="UTF-8">
   <meta name="viewport" content="width=device-width, initial-scale=1.0">
   <title>Body Transformation Quiz</title>
   <!-- Load Tailwind CSS -->
   <script src="https://cdn.tailwindcss.com"></script>
   <!-- Configure Tailwind for Inter font and mobile-first approach -->
   <script>
       tailwind.config = {
           theme: {
               extend: {
                   fontFamily: {
                       sans: ['Inter', 'sans-serif'],
                   },
                   colors: {
                       // Updated for Dark Theme visibility
                       'primary': '#60A5FA',    // Blue 400 (Brighter for dark contrast)
                       'secondary': '#FBBF24',  // Amber 400
                       'dark-surface': '#1F2937', // Gray 800 (Card background)
                       'dark-input': '#374151',  // Gray 700 (Input/Option background)
                       'very-dark': '#111827', // Gray 900 (Body background)
                       'accent-red': '#EF4444', // Red 500 for secondary product border
                   }
               }
           }
       }
   </script>
   <style>
       /* Custom styles for better aesthetics and mobile usability in DARK MODE */
       body {
           background-color: #111827; /* Very Dark Gray background */
           font-family: 'Inter', sans-serif;
       }

       .quiz-container {
           max-width: 420px;
           background-color: #1F2937; /* Dark surface for the card */
           color: #F3F4F6; /* Light text color default */
           box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.5), 0 4px 6px -2px rgba(0, 0, 0, 0.2);
       }

       /* Styling for the custom radio buttons (goal/activity selectors) */
       .option-card {
           transition: all 0.2s;
           cursor: pointer;
           border: 2px solid transparent;
           color: #F3F4F6; /* Explicitly set text to light */
       }

       .option-card:hover {
           border-color: #6B7280; /* Gray 500 */
       }

       input[type="radio"]:checked + .option-card {
           border-color: #60A5FA; /* Primary color */
           background-color: #1E40AF; /* Blue 800 for strong visual feedback */
       }

       /* Specific input text color adjustments */
       input[type="number"], input[type="text"] {
           color: #F3F4F6; /* Light text color for input fields */
       }
   </style>
</head>
<body class="p-4 flex items-center justify-center min-h-screen">

   <div id="quiz-app" class="quiz-container w-full rounded-xl p-6 md:p-8">
       <!-- Content will be injected here by JavaScript -->
   </div>

   <script type="text/javascript">
       // --- Hardcoded Logo URL ---
       // üí° REPLACE THE URL BELOW with the URL of your PNG logo. 
       // If you remove the URL (set to null), no logo area will display.
       const HARDCODED_LOGO_URL = "https://raw.githubusercontent.com/pet6988888888/images/refs/heads/main/Screenshot_79.jpg";


       // --- Core State Management ---
       const quizApp = document.getElementById('quiz-app');
       const userState = {
           step: 1,
           maxSteps: 8, // 7 question steps (1-7) and 1 results step (8)
           answers: {
               name: null, 
               goal: null, 
               gender: null, 
               age: null,
               height_cm: null,
               weight_kg: null,
               target_weight_kg: null,
               activity: null, 
               diet_plan: null,
               experience: null, // NEW: Experience Level
               focus: null,      // NEW: Program Focus (Workout, Diet, Complete)
           },
           calculated: {
               bmr: 0,
               tdee: 0,
               calorieTarget: 0,
               finalProducts: [], // NEW: Array to hold one or two recommended products
           }
       };

       // --- Products Object ---
       const PRODUCTS = {
           // 9 Main Systems (Workout + Diet) determined by Goal & Experience
           lose_beginner: { type: "System", name: "Beginner 4-Week Fat Loss & Nutrition Starter", link: "https://payhip.com/p/LBS", description: "Simple workouts, form instruction, and basic calorie deficit tracking." },
           lose_intermediate: { type: "System", name: "Intermediate 8-Week Shredding Program", link: "https://payhip.com/p/LIM", description: "Progressive compound lifts, effective splits, and moderate calorie cycling." },
           lose_advanced: { type: "System", name: "Elite Max-Fat Burn Protocol", link: "https://payhip.com/p/LAE", description: "Intense training, advanced techniques, and aggressive deficit strategies for maximum definition." },

           gain_beginner: { type: "System", name: "Start Strong: Beginner Muscle Mass System", link: "https://payhip.com/p/GBS", description: "Fundamental movements, proper muscle activation, and basic surplus tracking." },
           gain_intermediate: { type: "System", name: "Hypertrophy Accelerator Program", link: "https://payhip.com/p/GIM", description: "Optimized volume training splits, progressive overload, and customized macros." },
           gain_advanced: { type: "System", name: "Pro-Level Strength & Size Program", link: "https://payhip.com/p/GAE", description: "Periodized cycles, high-frequency training, and strategic recovery." },

           maintain_beginner: { type: "System", name: "Foundational Fitness & Health Guide", link: "https://payhip.com/p/MBS", description: "Establishing habits, functional training, and balanced energy levels." },
           maintain_intermediate: { type: "System", name: "Balanced Lifestyle and Endurance Plan", link: "https://payhip.com/p/MIM", description: "Optimizing stamina, mobility, and body composition maintenance." },
           maintain_advanced: { type: "System", name: "Peak Performance & Longevity Plan", link: "https://payhip.com/p/MAE", description: "Maintaining elite fitness, managing fatigue, and recovery focus." },

           // Dedicated Diet/Nutrition Products (Used when 'focus' is Diet or Complete)
           pure_diet_plan: { type: "Diet Only", name: "The Complete Nutrition Strategy Manual", link: "https://payhip.com/p/DietOnly", description: "Comprehensive guidance on meal timing, tracking, and calculating macros‚Äîno workout plan included." },
           diet_manual_add_on: { type: "Diet Add-On", name: "Exclusive Recipe & Meal Prep Manual", link: "https://payhip.com/p/AddOnDiet", description: "Your supplementary guide for thousands of meal ideas and preparation tips to pair with any workout system." },
       };
       // --- Utility Functions ---

       /**
        * Calculates Basal Metabolic Rate (BMR) using the Mifflin-St Jeor equation.
        * @returns {number} BMR in calories
        */
       function calculateBMR(gender, weight_kg, height_cm, age) {
           // Mifflin-St Jeor Equation
           let bmr = (10 * weight_kg) + (6.25 * height_cm) - (5 * age);

           if (gender === 'male') {
               bmr += 5;
           } else if (gender === 'female') {
               bmr -= 161;
           } else {
               return 0;
           }

           return Math.round(bmr);
       }

       function calculateTDEE(bmr, activityMultiplier) {
           return Math.round(bmr * activityMultiplier);
       }

       // --- Rendering Logic ---

       function renderQuiz() {
           quizApp.innerHTML = ''; // Clear previous content

           const stepContent = getStepContent(userState.step);
           // Total number of visible question screens
           const totalVisibleSteps = userState.maxSteps - 1; 

           // Display step counter only for question steps
           const stepCounter = userState.step <= totalVisibleSteps
               ? `<span class="text-sm font-semibold text-primary uppercase tracking-wider">
                     Step ${userState.step} of ${totalVisibleSteps}
                  </span>`
               : '';

           // Hardcoded Logo Display Logic (Only show on Step 1, with max-h-12 for slight enlargement)
           const logoHtml = (HARDCODED_LOGO_URL && userState.step === 1) 
               ? `<div class="w-full text-center pb-4 mb-4 border-b border-gray-700">
                      <img src="${HARDCODED_LOGO_URL}" alt="Site Logo" class="max-h-12 w-auto mx-auto object-contain" 
                           onerror="this.style.display='none'">
                  </div>`
               : '';


           quizApp.innerHTML = `
               ${logoHtml} 
               <div class="space-y-6">
                   <div class="text-center">
                       ${stepCounter}
                       <h2 class="text-2xl font-bold text-white mt-1">${stepContent.title}</h2>
                       <p class="text-gray-400">${stepContent.subtitle}</p>
                   </div>

                   <div id="step-body" class="space-y-4">
                       ${stepContent.body}
                   </div>

                   <!-- Navigation Buttons (Hidden on final Results Step 8) -->
                   <div class="flex justify-between pt-4 border-t border-gray-700 ${userState.step === userState.maxSteps ? 'hidden' : ''}">
                       <button onclick="prevStep()" id="prev-btn"
                           class="py-2 px-4 rounded-lg text-sm font-medium transition duration-150 ease-in-out ${userState.step > 1 ? 'bg-gray-700 text-white hover:bg-gray-600' : 'invisible'}"
                           ${userState.step === 1 ? 'disabled' : ''}>
                           ‚Üê Back
                       </button>
                       <button onclick="nextStep()" id="next-btn"
                           class="py-2 px-6 rounded-lg text-sm font-medium text-dark-surface bg-primary hover:bg-blue-300 transition duration-150 ease-in-out">
                           ${userState.step === totalVisibleSteps ? 'See Recommendation' : 'Next'} ‚Üí
                       </button>
                   </div>
                   <p id="error-message" class="text-red-500 text-sm font-medium text-center hidden"></p>
               </div>
           `;

           // Re-attach event listeners for specific inputs if necessary (e.g., radio buttons)
           attachInputListeners(userState.step);
       }

       function getStepContent(step) {
           switch (step) {
               case 1: // Welcome and Name Input
                   return {
                       title: "Find Your Perfect Plan",
                       subtitle: "Answer a few quick questions to get your personalized body transformation recommendation.",
                       body: `
                           <p class="text-gray-300 mb-4">This short quiz uses your goals and biometrics to calculate your baseline needs and match you with the ideal plan.</p>
                           ${createInput('name', 'What is your Name?', 'text', 'e.g., Alex', 'required')}
                       `
                   };
               case 2: // Goal
                   return {
                       title: "What is your main goal?",
                       subtitle: "Select the outcome you are primarily targeting right now.",
                       body: `
                           ${createRadioOption('goal', 'lose', 'Weight Loss (Fat)', 'Focus on shedding body fat and slimming down.')}
                           ${createRadioOption('goal', 'gain', 'Muscle Gain', 'Focus on building muscle mass and strength.')}
                           ${createRadioOption('goal', 'maintain', 'Maintenance', 'Focus on improving fitness and staying healthy.')}
                       `
                   };
               case 3: // Personal Info
                   return {
                       title: "Tell us about yourself",
                       subtitle: "We need a few details for accurate calculations.",
                       body: `
                           <form id="personal-form" onsubmit="return false;" class="space-y-4">
                               ${createInput('age', 'Age (Years)', 'number', 'e.g., 30', 'required')}
                               ${createInput('height_cm', 'Height (cm)', 'number', 'e.g., 175', 'required')}
                               ${createInput('weight_kg', 'Current Weight (kg)', 'number', 'e.g., 75', 'required')}
                               ${createInput('target_weight_kg', 'Target Weight (kg)', 'number', 'e.g., 70', 'required')}
                               <label class="block text-sm font-medium text-gray-300 mb-2">Gender</label>
                               <div class="flex space-x-4">
                                   ${createRadioOption('gender', 'male', 'Male', '', true, 'w-1/2')}
                                   ${createRadioOption('gender', 'female', 'Female', '', true, 'w-1/2')}
                               </div>
                           </form>
                       `
                   };
               case 4: // Activity (Shifted to Step 4)
                   return {
                       title: "Your Activity Level",
                       subtitle: "How often do you currently exercise each week?",
                       body: `
                           ${createRadioOption('activity', 1.2, 'Sedentary', 'Little to no exercise (desk job).')}
                           ${createRadioOption('activity', 1.375, 'Lightly Active', 'Light exercise/sports 1-3 days per week.')}
                           ${createRadioOption('activity', 1.55, 'Moderately Active', 'Moderate exercise/sports 3-5 days per week.')}
                           ${createRadioOption('activity', 1.725, 'Very Active', 'Hard exercise/sports 6-7 days per week.')}
                       `
                   };
               case 5: // Diet Plan (Shifted to Step 5)
                   return {
                       title: "What is your current eating plan?",
                       subtitle: "This helps us understand your habits, but won't change your product recommendation.",
                       body: `
                           ${createRadioOption('diet_plan', 'standard', 'Standard/Balanced Diet', 'Eating a varied diet with no strict restrictions.')}
                           ${createRadioOption('diet_plan', 'keto', 'Low-Carb/Keto', 'Focus on low carbohydrates and high fat intake.')}
                           ${createRadioOption('diet_plan', 'plant-based', 'Vegetarian/Vegan', 'Primarily or exclusively plant-based foods.')}
                           ${createRadioOption('diet_plan', 'intermittent', 'Intermittent Fasting (IF)', 'Following a time-restricted feeding schedule.')}
                           ${createRadioOption('diet_plan', 'other', 'Other/None Specific', 'Following a different plan or no specific plan.')}
                       `
                   };
               case 6: // NEW: Experience Level (Updated to focus on current physical fitness)
                   return {
                       title: "Your Current Fitness & Strength Level",
                       subtitle: "How would you rate your current physical capacity and baseline strength?",
                       body: `
                           ${createRadioOption('experience', 'beginner', 'Beginner', 'Minimal current strength/stamina; haven\'t exercised consistently in 6+ months.')}
                           ${createRadioOption('experience', 'intermediate', 'Intermediate', 'Regularly active (2-3 times/week); possess moderate stamina and strength.')}
                           ${createRadioOption('experience', 'advanced', 'Advanced', 'Train consistently (4+ times/week); high strength levels and excellent cardiovascular stamina.')}
                       `
                   };
               case 7: // NEW: Program Focus
                   return {
                       title: "What are you looking for?",
                       subtitle: "Tell us if you need help with workouts, nutrition, or both.",
                       body: `
                           ${createRadioOption('focus', 'workout', 'Workout Program Only', 'I only need a structured training routine.')}
                           ${createRadioOption('focus', 'diet', 'Diet Plan Only', 'I only need nutrition and meal guidance.')}
                           ${createRadioOption('focus', 'complete', 'Complete System (Both)', 'I need a full program covering both workouts and diet.')}
                       `
                   };
               case 8: // Results Step (Shifted to Step 8)
                   // Final Calculation step before results
                   calculateRecommendation();
                   return renderResultsPage();
               default:
                   return { title: "Error", subtitle: "Something went wrong.", body: "" };
           }
       }

       function createRadioOption(name, value, label, description, isSmall = false, classes = '') {
           const checked = userState.answers[name] == value ? 'checked' : '';
           const descHtml = description ? `<p class="text-xs text-gray-400 mt-1">${description}</p>` : '';
           const sizeClasses = isSmall ? 'p-3' : 'p-4';

           return `
               <label class="block ${classes}">
                   <input type="radio" name="${name}" value="${value}" class="hidden" ${checked} />
                   <div class="option-card ${sizeClasses} bg-dark-input rounded-lg shadow-md">
                       <span class="text-sm font-semibold">${label}</span>
                       ${descHtml}
                   </div>
               </label>
           `;
       }

       function createInput(name, label, type, placeholder, required = '') {
           const value = userState.answers[name] || '';
           const isText = type === 'text';

           return `
               <div>
                   <label for="${name}" class="block text-sm font-medium text-gray-300">${label}</label>
                   <input type="${type}" id="${name}" name="${name}" value="${value}" placeholder="${placeholder}" ${required}
                       class="mt-1 block w-full rounded-lg border-gray-600 shadow-sm p-3 text-base border focus:ring-primary focus:border-primary bg-dark-input placeholder-gray-500"
                       min="${!isText && (name === 'age' || name.includes('weight') || name.includes('height')) ? '0' : '0'}" step="${!isText && (name.includes('height') || name.includes('weight')) ? '0.1' : '1'}"
                   />
               </div>
           `;
       }

       function attachInputListeners(step) {
           // Attach listener for general input updates on question steps (1 through 7)
           if (step >= 1 && step <= 7) { 
               const stepBody = document.getElementById('step-body');
               if (stepBody) {
                   // Listener for radio buttons (Goal, Gender, Activity, Diet Plan, Experience, Focus)
                   stepBody.querySelectorAll('input[type="radio"]').forEach(radio => {
                       radio.addEventListener('change', (e) => {
                           userState.answers[e.target.name] = e.target.value;
                       });
                   });

                   // Listener for form inputs (Age, Height, Weight, Name)
                   stepBody.querySelectorAll('input[type="number"], input[type="text"]').forEach(input => {
                       input.addEventListener('input', (e) => {
                           if (e.target.type === 'text') {
                               userState.answers[e.target.id] = e.target.value.trim();
                           } else {
                               userState.answers[e.target.id] = parseFloat(e.target.value) || null;
                           }
                       });
                   });
               }
           }
       }

       // --- Navigation and Validation ---

       function displayError(message) {
           const errorElement = document.getElementById('error-message');
           errorElement.textContent = message;
           errorElement.classList.remove('hidden');
           setTimeout(() => errorElement.classList.add('hidden'), 3000);
       }

       function validateStep(step) {
           const answers = userState.answers;

           switch (step) {
               case 1: 
                   const nameInput = document.getElementById('name');
                   if (!nameInput || nameInput.value.trim().length < 2) {
                       displayError("Please enter your name to personalize your plan.");
                       return false;
                   }
                   userState.answers.name = nameInput.value.trim();
                   return true;
               case 2: // Goal
                   if (!answers.goal) {
                       displayError("Please select your primary fitness goal.");
                       return false;
                   }
                   return true;
               case 3: // Personal Info
                   if (!answers.age || answers.age < 16 || answers.age > 100 || 
                       !answers.height_cm || answers.height_cm < 100 || answers.height_cm > 250 || 
                       !answers.weight_kg || answers.weight_kg < 30 || answers.weight_kg > 300 || 
                       !answers.target_weight_kg || answers.target_weight_kg < 30 || answers.target_weight_kg > 300 || 
                       !answers.gender) {
                       displayError("Please ensure all personal details are filled and valid.");
                       return false;
                   }

                   // Goal consistency check
                   const currentWeight = answers.weight_kg;
                   const targetWeight = answers.target_weight_kg;
                   const goal = answers.goal;

                   if (goal === 'lose' && targetWeight >= currentWeight) {
                       displayError("For 'Weight Loss', your Target Weight must be less than your Current Weight.");
                       return false;
                   }
                   if (goal === 'gain' && targetWeight <= currentWeight) {
                       displayError("For 'Muscle Gain', your Target Weight must be greater than your Current Weight.");
                       return false;
                   }
                   if (goal === 'maintain' && Math.abs(targetWeight - currentWeight) > 5) {
                       displayError("For 'Maintenance', your Target Weight should be within 5kg of your Current Weight.");
                       return false;
                   }

                   return true;
               case 4: // Activity
                   if (!answers.activity) {
                       displayError("Please select your current activity level.");
                       return false;
                   }
                   return true;
               case 5: // Diet Plan
                   if (!answers.diet_plan) {
                       displayError("Please select your current eating plan.");
                       return false;
                   }
                   return true;
               case 6: // NEW: Experience
                   if (!answers.experience) {
                       displayError("Please select your fitness experience level.");
                       return false;
                   }
                   return true;
               case 7: // NEW: Focus
                   if (!answers.focus) {
                       displayError("Please select your program focus.");
                       return false;
                   }
                   return true;
               case 8: // Results step
                   return true;
               default:
                   return true;
           }
       }

       function nextStep() {
           if (validateStep(userState.step)) {
               if (userState.step < userState.maxSteps) {
                   userState.step++;
                   renderQuiz();
               }
           }
       }

       function prevStep() {
           if (userState.step > 1) {
               userState.step--;
               renderQuiz();
           }
       }

       function retakeQuiz() {
           // Reset state
           userState.step = 1;
           userState.answers = {
               name: null, goal: null, gender: null, age: null,
               height_cm: null, weight_kg: null, target_weight_kg: null,
               activity: null, diet_plan: null, experience: null, focus: null,
           };
           userState.calculated = {
               bmr: 0, tdee: 0, calorieTarget: 0, finalProducts: [],
           };
           renderQuiz();
       }

       // --- Calculation and Recommendation Logic ---

       function calculateRecommendation() {
           const { goal, gender, age, height_cm, weight_kg, activity, experience, focus } = userState.answers;
           
           // 1. Calculate BMR & TDEE (using current weight)
           const bmr = calculateBMR(gender, weight_kg, height_cm, age);
           const tdee = calculateTDEE(bmr, parseFloat(activity));
           userState.calculated.bmr = bmr;
           userState.calculated.tdee = tdee;

           // 2. Set Calorie Target based on Goal
           let target = tdee;
           if (goal === 'lose') {
               target = tdee - 500; // 500 calorie deficit
           } else if (goal === 'gain') {
               target = tdee + 300; // 300 calorie surplus
           }
           userState.calculated.calorieTarget = target;

           // 3. Determine Final Products based on Experience and Focus
           userState.calculated.finalProducts = [];
           const finalProducts = [];
           
           // Find the core product key based on goal and experience (e.g., 'lose_beginner')
           const coreProductKey = `${goal}_${experience}`;
           const coreProduct = PRODUCTS[coreProductKey]; 
           
           // Logic to populate finalProducts array
           if (focus === 'workout' && coreProduct) {
               // Workout Program Only: Use the main system product, but label it as workout only
               const workoutProduct = { ...coreProduct, name: `${coreProduct.name} (Workout Program Only)`};
               finalProducts.push(workoutProduct);

           } else if (focus === 'diet') {
               // Diet Plan Only: Use the dedicated pure_diet_plan
               finalProducts.push(PRODUCTS['pure_diet_plan']);

           } else if (focus === 'complete' && coreProduct) {
               // Complete System (Both): Use the main system AND the diet manual add-on
               finalProducts.push(coreProduct); // Main System
               finalProducts.push(PRODUCTS['diet_manual_add_on']); // Diet Manual
           }

           userState.calculated.finalProducts = finalProducts;
       }

       // --- Results Page Rendering ---

       function renderResultsPage() {
           const { tdee, calorieTarget, finalProducts } = userState.calculated;
           const name = userState.answers.name || 'Friend';

           let targetLabel = "Daily Calorie Target for Maintenance";
           if (userState.answers.goal === 'lose') {
               targetLabel = "Daily Calorie Target for Fat Loss (Deficit)";
           } else if (userState.answers.goal === 'gain') {
               targetLabel = "Daily Calorie Target for Muscle Gain (Surplus)";
           }

           // Dynamically generate product cards
           const productCardsHtml = finalProducts.map((product, index) => {
               const isPrimary = index === 0;
               const borderColor = isPrimary ? 'border-secondary' : 'border-accent-red';
               
               // Use placeholder image URL for all products
               const placeholderImage = `https://placehold.co/150x150/${isPrimary ? 'FBBF24' : 'EF4444'}/1F2937?text=${product.type.replace(/\s/g, '+')}`;

               return `
                   <div class="bg-dark-input rounded-xl p-6 shadow-md border-t-4 ${borderColor} ${finalProducts.length > 1 ? 'mt-4' : 'mt-0'}">
                       <p class="text-sm font-semibold text-gray-400 mb-2 uppercase">${product.type} RECOMMENDATION</p>
                       <img src="${placeholderImage}" alt="${product.name}" 
                           class="w-24 h-24 rounded-full mx-auto mb-4 border-4 border-dark-surface shadow-lg">
                       <h3 class="text-xl font-extrabold ${isPrimary ? 'text-primary' : 'text-accent-red'}">${product.name}</h3>
                       <p class="text-gray-400 mt-2">${product.description}</p>

                       <a href="${product.link}" target="_blank"
                           class="mt-6 inline-block w-full py-3 px-6 rounded-lg text-lg font-bold text-dark-surface ${isPrimary ? 'bg-secondary hover:bg-yellow-500' : 'bg-accent-red hover:bg-red-400'} transition duration-150 ease-in-out shadow-lg hover:shadow-xl">
                           View Details ‚Üí
                       </a>
                   </div>
               `;
           }).join('');


           return {
               title: `Thanks, ${name}! Here are Your Results.`, 
               subtitle: `Based on your goal, experience, and focus, here is your personalized plan and calorie target.`, 
               body: `
                   <div class="space-y-6 text-center">
                       <!-- TDEE & Target Card -->
                       <div class="bg-primary text-dark-surface rounded-xl p-5 shadow-lg">
                           <p class="text-sm font-light uppercase opacity-80">Estimated Daily Energy Expenditure (TDEE)</p>
                           <p class="text-4xl font-extrabold mt-1">${tdee} <span class="text-2xl font-light">cals</span></p>
                           
                           <!-- Dynamic Calorie Target Display -->
                           <p class="mt-4 text-sm font-light uppercase opacity-80">${targetLabel}</p>
                           <p class="text-2xl font-bold">${calorieTarget} <span class="text-xl font-light">cals</span></p>
                       </div>

                       <!-- Product Recommendation Cards -->
                       <div class="space-y-4">
                           ${productCardsHtml}
                       </div>
                   </div>

                   <!-- Retake Quiz Button -->
                   <button onclick="retakeQuiz()" class="mt-8 w-full py-3 rounded-lg text-lg font-bold bg-gray-700 text-white hover:bg-gray-600 transition duration-150 ease-in-out">
                       Retake Quiz
                   </button>
               `
           };
       }

       // --- Initialization ---
       document.addEventListener('DOMContentLoaded', () => {
           renderQuiz();
       });
   </script>
</body>
</html>
